<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generátor smlouvy</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="max-w-xl mx-auto mt-10 bg-white p-6 rounded-xl shadow-md">
    <h1 class="text-2xl font-bold mb-6 text-center">Generátor smlouvy</h1>
    <form method="POST" id="contractForm">
      <!-- Standardní vstupy -->
      <label class="block mb-2">Název akce</label>
      <input type="text" name="nazev_akce" required class="w-full mb-4 p-2 border rounded" />

      <label class="block mb-2">Číslo akce</label>
      <input type="text" name="cislo_akce" required class="w-full mb-4 p-2 border rounded" />

      <label class="block mb-2">Vedoucí</label>
      <select name="vedouci" required class="w-full mb-4 p-2 border rounded">
        <option value="Marcel Chmelík DiS., vedoucí oddělení realizace investic">Marcel Chmelík DiS.</option>
        <option value="Ing. Jakub Hušek, vedoucí oddělení přípravy investic">Ing. Jakub Hušek</option>
      </select>

      <label class="block mb-2">Dozor (TDS)</label>
      <select name="dozor" required class="w-full mb-4 p-2 border rounded">
        <option>Ing. Pavel Kamenický</option>
        <option>Ing. František Zurek</option>
        <option>Martin Pala</option>
        <option>Ing. Michal Ranný</option>
        <option>Milan Kyral DiS.</option>
        <option>Ing. Vladimír Vít</option>
        <option>Ing. Marek Špryňar</option>
      </select>

      <label class="block mb-2">Zahájení (měsíc a rok)</label>
      <input type="text" name="zahajeni" required class="w-full mb-4 p-2 border rounded" />

      <label class="block mb-2">Bankovní záruka</label>
      <select name="bz" required class="w-full mb-4 p-2 border rounded">
        <option value="ANO">ANO</option>
        <option value="NE">NE</option>
      </select>

      <label class="block mb-2">Pojistná smlouva</label>
      <select name="poj" required class="w-full mb-4 p-2 border rounded">
        <option value="10 000 000">10 000 000</option>
        <option value="20 000 000">20 000 000</option>
      </select>

      <!-- Vyhrazené položky -->
      <label class="block mb-2">Vyhrazené položky</label>
      <select name="vyh" id="vyh" required class="w-full mb-4 p-2 border rounded" onchange="toggleTable()">
        <option value="NE">NE</option>
        <option value="ANO">ANO</option>
      </select>

      <div id="vyh-section" class="hidden">
        <h2 class="text-lg font-semibold mt-4 mb-2">Souhrn vyhrazených položek</h2>
        <table class="w-full border mb-2" id="vyh-table">
          <thead>
            <tr class="bg-gray-200">
              <th class="p-2 border">Stavební objekty vyhrazených změn</th>
              <th class="p-2 border">Položky vyhrazených změn</th>
            </tr>
          </thead>
          <tbody id="vyh-rows">
            <tr>
              <td class="border p-1"><input type="text" name="so_1" class="w-full p-1 border rounded" /></td>
              <td class="border p-1"><input type="text" name="polozky_1" class="w-full p-1 border rounded" /></td>
            </tr>
            <tr>
              <td class="border p-1"><input type="text" name="so_2" class="w-full p-1 border rounded" /></td>
              <td class="border p-1"><input type="text" name="polozky_2" class="w-full p-1 border rounded" /></td>
            </tr>
          </tbody>
        </table>
        <input type="hidden" id="vyh-count" name="vyh_count" value="2">
        <button type="button" onclick="addRow()" class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600">Vložit další řádek</button>
      </div>

      <button type="submit" class="w-full mt-6 bg-blue-600 text-white p-3 rounded hover:bg-blue-700">Vygenerovat smlouvu</button>
    </form>
  </div>

  <script>
    function toggleTable() {
      const vyh = document.getElementById("vyh").value;
      document.getElementById("vyh-section").classList.toggle("hidden", vyh !== "ANO");
    }

    function addRow() {
      const table = document.getElementById("vyh-rows");
      const countInput = document.getElementById("vyh-count");
      let count = parseInt(countInput.value);
      count++;
      countInput.value = count;

      const row = document.createElement("tr");
      row.innerHTML = `
        <td class="border p-1"><input type="text" name="so_${count}" class="w-full p-1 border rounded" /></td>
        <td class="border p-1"><input type="text" name="polozky_${count}" class="w-full p-1 border rounded" /></td>
      `;
      table.appendChild(row);
    }
  </script>
</body>
</html>
